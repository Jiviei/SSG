---
order: 16
title: "[EP] Подготовка к демонстрации"
---

## Внешняя

### Катя

Всем привет! Сегодня мы хотим вам показать новые возможности приложения и новый портал для читателей ics-it. Сначала давайте посмотрим небольшие изменения, а затем -- новый портал.

### Даня

Всем привет!

Первая доработка, которую я покажу -- это **решение конфликта с удалением файла**. Раньше, если вы вносили изменения в файл, который удален, синхронизировать каталог или опубликовать изменения было невозможно.

Теперь это работает так:

1. Открываю статью и вношу изменения.

2. Перехожу в гитлаб и удаляю эту статью.

3. Возвращаюсь в грамакс и синхронизирую каталог -- грамакс понимает, что это конфликт и предлагает его решить.

4. Решаю конфликт, синхронизация завершается.

Есть вопросы?

Тогда к следующей доработке. Теперь вам не обязательно использовать ссылку для ревью внутри компании. **Достаточно скопировать ссылку в урл**. Как это работает:

1. Открываю статью и копирую ссылку.

2. Перехожу в режим инкогнито. Как видите, тут у меня нет ни одного каталога.

3. Перехожу по ссылке -- грамакс предлагает загрузить каталог.

4. Загружаю -- нужна статья открывается.

Также, если ссылка ведет на более актуальную версию или на другую ветку -- грамакс предложит синхронизировать каталог или сменить ветку.

Есть вопросы? Тогда передаю слово Стасу.

### Стас П

Всем привет! Следующая доработка -- это **работа с диаграммами в офлайн-режиме**. Раньше все диаграммы формировались на нашем сервере, потому с ними нельзя было работать без подключения к интернету. Теперь диаграммы формируются в самом приложении. Например:

1. Добавлю диаграмму mermaid и [diagrams.net](http://diagrams.net).

2. Отключу интернет.

3. Нажимаю редактировать мермейд, вношу изменения -- все работает. Редактировать диаграмс. нет -- все также работает.

Единственное ограничение -- диаграммы plant.uml не работают без интрнета. Это из-за того, что они формируются на сервере plant.uml.

Есть вопросы? Тогда передаю слово Паше.

### Паша

Всем привет! Первая доработка -- это **отображение иллюстраций в окне публикации**. Раньше в окне публикации изменений не отображались картинки и диаграммы. Теперь отображаются. Например:

1. Добавлю в статью скриншот и диаграмму.

2. Открою окно публикации и кликну на них -- они отображаются.

Известное ограничение -- если вы удаляете картинку, в окне публикации изменений это действие отобразится, но саму картинку просмотреть вы не сможете.

Есть вопросы?

Тогда к следующей доработке -- **автоматическое формирование комментария к коммиту**. Раньше комментарий нужно было писать самостоятельно, теперь он формируется автоматически. Например:

1. Внесу изменения в 3 статьи.

2. Открою окно публикации -- в поле указано, сколько файлов я поменял и перечислен список этих файлов.

3. Публикую.

4. Открываю коммит в гитлабе -- этот комментарий отобразился.

Есть вопросы? Тогда передаю слово Кате.

### Катя

## Внутренняя

### Сережа

-  **Стандартизация логики инлайновой панели**. Раньше, после выбора любого оформления в панели редактирования, панель пропадала. Теперь она работает, как и в других системах: пока есть выделение текста, есть и панель.

   **Как потестить**: попробовать оформлять текст с помощью инлайновой панели.

-  **Улучшение работы дополнительной панели со ссылками**. У нас была проблема: интерфейс добавления и редактирования ссылки работал неочевидно и пользователи часто случайно ломали ссылки. Сейчас этот интерфейс также приведен к стандарту: при клике на ссылку по ней переходишь, при клике на карандашик -- редактируешь, на мусорку -- удаляешь.

   **Как потестить**: добавлять ссылки в статьи.

### Даня

-  **Решение конфликта с удалением файла**. Раньше, если пользователь пытался внести изменения в статью, которую кто-то удалил, вылезала ошибка. Теперь появляется стандартный интерфейс решения конфликта.

   **Как потестить**: открываем статью в Gramax, вносим в нее изменения. Затем открываем ее в гитлаб и удаляем. Если в Gramax попытаться опубликовать изменения -- появится окно решения конфликта.

-  **Работа с коммитом, который произошел без пуша**. Раньше была проблема: если во время публикации перезагрузишь страницу, коммит произойдет, а пуш - нет. И вручную его сделать не получится. Потому мы добавили в панель состояния репозитория стандартные обозначения синхронизации: сколько нужно изменений получить с сервера, а также - сколько отправить.

   **Как протестить**: просто поработать с кнопкой синхронизации.

-  **Понятная ошибка, если статья перенесена в другой вкладке**. Раньше, если работа велась в разных вкладках и в одной из них статья удалялась или переносилась, появлялась непонятная ошибка. Теперь она понятная.

   **Как протестить**: открыть в двух вкладках один каталог и в одной из них перенести статью.

-  **Удобная ссылка на статью**. Раньше, чтобы отправить ссылку на ревью, ее нужно было генерировать отдельно. Теперь обычная ссылка из браузера работает так же: достаточно по ней перейти и если каталог не был загружен -- он загрузится, а если ветка не синхронизирована -- приложение предложит ее синхронизировать.

   **Как протестить:** скопировать ссылку и открыть ее в инкогнито.

### Паша

-  **Отображение картинок в публикации изменений**. Раньше в окне публикации изменений нельзя было просматривать добавленные картинки и диаграммы. Теперь можно.

   **Как потестить**: добавить в Gramax в статью картинки и диаграммы, затем открыть окно публикации и покликать на них.

   **Известное ограничение**: если удалить картинку, в окне публикации ее не просмотреть.

-  **Отображение пустых строк в публикации изменений**. Раньше, если в статью добавилась пустая строка, это изменение не отображалось в окне публикации. Теперь отображается. **Как протестить**: добавить в статью пустую строку и просмотреть в окне публикации.

-  **Подтверждение важных операций**. Раньше, если во время публикации, смены ветки или синхронизации пользователь перезагружал страницу, все ломалось. Теперь мы добавили окно подтверждения операции -- оно даст приложению немного времени, а пользователю понимание, что происходит какой-то процесс.

   **Как протестить**: например, кликнуть синхронизацию и сразу перезагрузку.

-  **Автоматическая генерация комментария к коммиту**. Раньше поле с комментарием заполняли пользователи, потому большая часть коммитов была с комментарием upd или fix. Мы решили избавить пользователей от этого и сделали автоматическую генерацию -- в комменте пропишется: сколько и какие конкретно файлы были изменены.

   **Как потестить**: опубликовать несколько изменений и проверить, правильно ли генерируется комментарий.

-  **Инициализация каталога в репозитории, где его не было**. Раньше нельзя было загрузить в приложение репозиторий, в котором нет каталога (под каталогом подразумеваем наличие док-рута и мд-файлов). Теперь такая возможность есть -- докрут создастся автоматически с черновыми данными.

   **Как протестить**: загрузить репозиторий без каталогов.

### Стас Петров:

-  **Перенос диаграмм с серверной части в клиентскую**. Раньше все диаграммы рендерелись на нашем сервере. Это не отвечает концепции приложения, потому нужно было перенести эту логику в само приложение.

   **Как протестить**: подобавлять диаграммы без интернета. Что получили:

   -  [Diagrams.net](http://Diagrams.net) -- работают, вся логика выполняется в приложении.

   -  С4 -- заменили на Mermaid. Вся логика выполняется в приложении.

   -  Plant UML -- вся логика выполняется на сервере сервиса, доступна только при подключении к интернету.

-  **Понятная обработка ошибок в диаграммах**. Раньше, если в диаграмме была ошибка синтаксиса или путь был указан неверно, показывалась обычная ошибка парсера. Теперь для каждой диаграммы показывается понятная ошибка.

   **Как протестить**: создать диаграмму Х и отключить интернет. Так как у нас она работает только с подключением к интернету, выведется ошибка. Или добавить диаграмму Х, а затем вручную через “Редактировать Markdown” сломать путь.

-  **Портал с документацией и блогом Gramax**. Раньше материалы по Gramax были в портале ics-it. Теперь это отдельный портал.